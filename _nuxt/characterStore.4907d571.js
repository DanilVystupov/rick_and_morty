import{Q as o}from"./entry.f94fe60e.js";const r="https://rickandmortyapi.com/api/character",l=o("characterStore",{state:()=>({characters:[],currentPage:1,totalPages:0,searchQuery:"",isLoading:!0,selectedStatus:"all",isCharactersFound:!0}),actions:{async fetchCharacters(a=this.currentPage){try{this.isLoading=!0;const t=await(await fetch(`${r}?page=${a}`)).json();this.characters=t.results,this.totalPages=t.info.pages,this.currentPage=a,this.isLoading=!1}catch(s){console.error("Ошибка при загрузке данных:",s)}},async fetchCharactersBySearchAndStatus(a,s){try{this.isLoading=!0;let t=`${r}?name=${a}`;s!=="all"&&(t+=`&status=${s}`);const e=await(await fetch(t)).json();e.error?(this.characters=[],this.totalPages=0,this.isCharactersFound=!0):(this.characters=e.results,this.totalPages=e.info.pages,this.isCharactersFound=!1),this.currentPage=1,this.selectedStatus=s,this.searchQuery=a,this.isLoading=!1}catch(t){console.error("Ошибка при загрузке данных:",t)}},async fetchAllCharacters(){try{this.isLoading=!0,this.characters=[];const t=(await(await fetch(`${r}?page=1`)).json()).info.pages,c=[];for(let e=1;e<=t;e++){const i=await(await fetch(`${r}?page=${e}`)).json();c.push(...i.results)}this.characters=c,this.totalPages=t,this.isLoading=!1}catch(a){console.error("Ошибка при загрузке данных:",a)}}},getters:{filteredCharacters(a){const s=a.searchQuery.toLowerCase();return a.characters.filter(t=>t.name.toLowerCase().includes(s))}}});export{l as u};
